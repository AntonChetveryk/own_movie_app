{"version":3,"sources":["components/Filters/SortBy.jsx","components/Filters/Pagination.jsx","api/api.js","components/Filters/Genres.jsx","components/Filters/Filters.jsx","components/Movies/Favorit.jsx","components/Movies/Watchlist.jsx","components/Movies/MovieItem.jsx","components/Movies/MoviesList.jsx","components/Movies/MoviesContainer.jsx","components/Header/LoginForm.jsx","components/Header/Login.jsx","components/Header/UserMenu.jsx","components/Header/Header.jsx","components/App.jsx","index.js"],"names":["years","from","to","i","push","getYears","SortBy","this","props","filters","sort_by","primary_release_year","onChangeFilters","options","className","htmlFor","id","name","value","onChange","map","option","key","label","React","Component","defaultProps","image","Pagination","page","total_pages","API_URL","API_KEY_3","fetchApi","url","Promise","resolve","reject","fetch","then","res","status","json","catch","error","Genres","state","genresList","getGenresList","setState","genres","onChangeGenres","genre","type","checked","includes","String","Filters","onChangePage","onReset","onClick","disabled","bind","PureComponent","Favorit","isFavorite","favorits","movie","findIndex","item","session_id","user","getFavorits","toggleModal","favoriteApi","method","mode","headers","body","JSON","stringify","media_type","media_id","favorite","console","log","Watchlist","isLoading","isWatchlist","watchlist","getWatchlist","MovieItem","src","backdrop_path","poster_path","alt","title","vote_average","MoviesList","movies","MoviesContainer","getMovies","prevProps","tokenApi","tokenWithLoginApi","sessionIdApi","LoginForm","username","password","repeatPassword","errors","submitting","e","target","prevState","handleBlur","validateFields","Object","keys","length","onSubmit","request_token","updateSessionId","updateUser","base","status_message","onLogin","preventDefault","classNames","placeholder","onBlur","Login","showModal","Modal","isOpen","toggle","ModalBody","UserMenu","dropdownOpen","toggleDropdown","handleLogOut","onLogOut","Dropdown","DropdownToggle","tag","data-toggle","aria-expanded","width","avatar","gravatar","hash","DropdownMenu","right","DropdownItem","Header","href","cookies","Cookies","App","data","results","set","path","maxAge","remove","link","join","response","event","filter","el","initialState","get","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.dad1817c.chunk.js","sourcesContent":["import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nfunction getYears(from, to) {\r\n  let years = [];\r\n  for (let i = from; i <= to; i++) {\r\n    years.push(i);\r\n  }\r\n  return years;\r\n}\r\n\r\nconst years = getYears(1950, 2025);\r\n\r\nexport default class SortBy extends React.Component {\r\n  static propTypes = {\r\n    filters: PropTypes.object.isRequired,\r\n    onChangeFilters: PropTypes.func.isRequired,\r\n  };\r\n\r\n  static defaultProps = {\r\n    options: [\r\n      {\r\n        label: \"Популярные по убыванию\",\r\n        value: \"popularity.desc\",\r\n        image: \"/lol.jpg\",\r\n      },\r\n      {\r\n        label: \"Популярные по возростанию\",\r\n        value: \"popularity.asc\",\r\n      },\r\n      {\r\n        label: \"Рейтинг по убыванию\",\r\n        value: \"vote_average.desc\",\r\n      },\r\n      {\r\n        label: \"Рейтинг по возростанию\",\r\n        value: \"vote_average.asc\",\r\n      },\r\n    ],\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      filters: { sort_by, primary_release_year },\r\n      onChangeFilters,\r\n      options,\r\n    } = this.props;\r\n    return (\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"sort_by\">Сортировать по:</label>\r\n        <select\r\n          id=\"sort_by\"\r\n          className=\"form-control\"\r\n          name=\"sort_by\"\r\n          value={sort_by}\r\n          onChange={onChangeFilters}\r\n        >\r\n          {options.map((option) => (\r\n            <option key={option.value} value={option.value}>\r\n              {option.label}\r\n            </option>\r\n          ))}\r\n        </select>\r\n\r\n        <label htmlFor=\"primary_release_year\">Сортировать по году:</label>\r\n        <select\r\n          className=\"form-control\"\r\n          value={primary_release_year}\r\n          onChange={onChangeFilters}\r\n          id=\"primary_release_year\"\r\n          name=\"primary_release_year\"\r\n        >\r\n          {years.map((option) => (\r\n            <option key={option} value={option}>\r\n              {option}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nconst Pagination = (props) => {\r\n  const { page, total_pages } = props;\r\n  return (\r\n    <div className=\"text-center\">\r\n      <span>{`${page} of ${total_pages}`}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Pagination;\r\n","export const API_URL = \"https://api.themoviedb.org/3\";\r\n\r\nexport const API_KEY_3 = \"b3ff350532467eb0b07cf18d16f4a254\";\r\n\r\nexport const API_KEY_4 =\r\n  \"eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJiM2ZmMzUwNTMyNDY3ZWIwYjA3Y2YxOGQxNmY0YTI1NCIsInN1YiI6IjVkZWJlZWIzZGFmNTdjMDAxNWVhOWVhYiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.442u7uWzvay-kNfCoZWJ7h-5KWhh9qWCJHHqA3jjOBw\";\r\n\r\nexport const fetchApi = (url, options = {}) => {\r\n  return new Promise((resolve, reject) => {\r\n    fetch(url, options)\r\n      .then((res) => {\r\n        if (res.status < 400) {\r\n          return res.json();\r\n        } else {\r\n          throw res;\r\n        }\r\n      })\r\n      .then((res) => resolve(res))\r\n      .catch((res) => res.json().then((error) => reject(error)));\r\n  });\r\n};\r\n","import React from \"react\";\r\nimport { API_URL, API_KEY_3 } from \"../../api/api\";\r\n\r\nexport default class Genres extends React.Component {\r\n  state = {\r\n    genresList: [],\r\n  };\r\n\r\n  getGenresList = () => {\r\n    fetch(`${API_URL}/genre/movie/list?api_key=${API_KEY_3}&language=ru-RU`)\r\n      .then((res) => res.json())\r\n      .then((res) => this.setState(this.setState({ genresList: res.genres })));\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.getGenresList();\r\n  }\r\n\r\n  render() {\r\n    const { genresList } = this.state;\r\n    const {\r\n      filters: { genres },\r\n      onChangeGenres,\r\n    } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        {genresList.map((genre) => (\r\n          <div key={genre.id}>\r\n            <input\r\n              type=\"checkbox\"\r\n              name={genre.name}\r\n              id={genre.id}\r\n              value={genre.id}\r\n              checked={genres.includes(String(genre.id))}\r\n              onChange={onChangeGenres}\r\n            />\r\n            <label htmlFor={genre.id} className=\"ml-2\">\r\n              {genre.name}\r\n            </label>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport SortBy from \"./SortBy\";\r\nimport Pagination from \"./Pagination\";\r\nimport Genres from \"./Genres\";\r\n\r\nexport default class Filters extends React.PureComponent {\r\n  render() {\r\n    const {\r\n      filters,\r\n      page,\r\n      onChangeFilters,\r\n      onChangePage,\r\n      total_pages,\r\n      onReset,\r\n      onChangeGenres,\r\n    } = this.props;\r\n    return (\r\n      <form className=\"mb-3\">\r\n        <button type=\"button\" className=\"btn btn-light my-2\" onClick={onReset}>\r\n          Сбросить фильтры\r\n        </button>\r\n        <SortBy filters={filters} onChangeFilters={onChangeFilters} />\r\n        <div className=\"btn-group my-2\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-light\"\r\n            disabled={page === 1}\r\n            onClick={onChangePage.bind(null, page - 1)}\r\n          >\r\n            Назад\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-light\"\r\n            disabled={page === total_pages}\r\n            onClick={onChangePage.bind(null, page + 1)}\r\n          >\r\n            Вперед\r\n          </button>\r\n        </div>\r\n        <Pagination page={page} total_pages={total_pages} />\r\n        <h3 className=\"my-4\">Жанры:</h3>\r\n        <Genres filters={filters} onChangeGenres={onChangeGenres} />\r\n      </form>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport Star from \"@material-ui/icons/Star\";\r\nimport StarBorder from \"@material-ui/icons/StarBorder\";\r\nimport { fetchApi, API_KEY_3, API_URL } from \"../../api/api\";\r\n\r\nexport default class Favorit extends React.Component {\r\n  isFavorite = () => {\r\n    const { favorits, movie } = this.props;\r\n\r\n    return favorits.findIndex((item) => item.id === movie.id) !== -1;\r\n  };\r\n\r\n  onClick = () => {\r\n    const {\r\n      movie: { id },\r\n      session_id,\r\n      user,\r\n      getFavorits,\r\n      toggleModal,\r\n    } = this.props;\r\n\r\n    if (session_id) {\r\n      const favoriteApi = `${API_URL}/account/${user.id}}/favorite?api_key=${API_KEY_3}&session_id=${session_id}`;\r\n      fetchApi(favoriteApi, {\r\n        method: \"POST\",\r\n        mode: \"cors\",\r\n        headers: {\r\n          \"Content-type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          media_type: \"movie\",\r\n          media_id: id,\r\n          favorite: !this.isFavorite(),\r\n        }),\r\n      }).then((res) => {\r\n        getFavorits(user);\r\n        console.log(res);\r\n      });\r\n    } else {\r\n      toggleModal();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        {this.isFavorite() ? (\r\n          <Star onClick={this.onClick} />\r\n        ) : (\r\n          <StarBorder onClick={this.onClick} />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport Bookmark from \"@material-ui/icons/Bookmark\";\r\nimport BookmarkBorder from \"@material-ui/icons/BookmarkBorder\";\r\nimport { fetchApi, API_KEY_3, API_URL } from \"../../api/api\";\r\n\r\nexport default class Watchlist extends React.Component {\r\n  state = {\r\n    isLoading: false,\r\n  };\r\n\r\n  isWatchlist = () => {\r\n    const { watchlist, movie } = this.props;\r\n\r\n    return watchlist.findIndex((item) => item.id === movie.id) !== -1;\r\n  };\r\n\r\n  onClick = () => {\r\n    const {\r\n      movie: { id },\r\n      session_id,\r\n      user,\r\n      getWatchlist,\r\n      toggleModal,\r\n    } = this.props;\r\n\r\n    if (session_id) {\r\n      const favoriteApi = `${API_URL}/account/${user.id}}/watchlist?api_key=${API_KEY_3}&session_id=${session_id}`;\r\n      this.setState({ isLoading: true });\r\n\r\n      fetchApi(favoriteApi, {\r\n        method: \"POST\",\r\n        mode: \"cors\",\r\n        headers: {\r\n          \"Content-type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          media_type: \"movie\",\r\n          media_id: id,\r\n          watchlist: !this.isWatchlist(),\r\n        }),\r\n      }).then((res) => {\r\n        this.setState({ isLoading: false }, () => {\r\n          getWatchlist(user);\r\n          console.log(res);\r\n        });\r\n      });\r\n    } else {\r\n      toggleModal();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        {this.isWatchlist() ? (\r\n          <Bookmark\r\n            onClick={this.onClick}\r\n            className={this.state.isLoading ? \"disable\" : null}\r\n          />\r\n        ) : (\r\n          <BookmarkBorder\r\n            onClick={this.onClick}\r\n            className={this.state.isLoading ? \"disable\" : null}\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport Favorit from \"./Favorit\";\r\nimport Watchlist from \"./Watchlist\";\r\n\r\nexport default class MovieItem extends React.Component {\r\n  render() {\r\n    const {\r\n      movie,\r\n      favorits,\r\n      watchlist,\r\n      user,\r\n      session_id,\r\n      getFavorits,\r\n      getWatchlist,\r\n      toggleModal,\r\n    } = this.props;\r\n\r\n    return (\r\n      <div className=\"card\">\r\n        <img\r\n          className=\"card-img-top card-img--height\"\r\n          src={\r\n            movie.backdrop_path || movie.poster_path\r\n              ? `https://image.tmdb.org/t/p/w500${\r\n                  movie.backdrop_path || movie.poster_path\r\n                }`\r\n              : \"https://i.ya-webdesign.com/images/video-camera-png-icon.png\"\r\n          }\r\n          alt=\"img\"\r\n        />\r\n        <div className=\"card-body\">\r\n          <h6 className=\"card-title\">{movie.title}</h6>\r\n          <div className=\"card-text\">Рейтинг: {movie.vote_average}</div>\r\n          <Favorit\r\n            movie={movie}\r\n            favorits={favorits}\r\n            user={user}\r\n            session_id={session_id}\r\n            getFavorits={getFavorits}\r\n            toggleModal={toggleModal}\r\n          />\r\n          <Watchlist\r\n            movie={movie}\r\n            watchlist={watchlist}\r\n            user={user}\r\n            session_id={session_id}\r\n            getWatchlist={getWatchlist}\r\n            toggleModal={toggleModal}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport MovieItem from \"./MovieItem\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst MoviesList = ({\r\n  movies,\r\n  session_id,\r\n  favorits,\r\n  watchlist,\r\n  user,\r\n  getFavorits,\r\n  getWatchlist,\r\n  toggleModal,\r\n}) => (\r\n  <div className=\"row\">\r\n    {movies.map((movie) => {\r\n      return (\r\n        <div key={movie.id} className=\"col-6 mb-4\">\r\n          <MovieItem\r\n            movie={movie}\r\n            user={user}\r\n            session_id={session_id}\r\n            favorits={favorits}\r\n            watchlist={watchlist}\r\n            getFavorits={getFavorits}\r\n            getWatchlist={getWatchlist}\r\n            toggleModal={toggleModal}\r\n          />\r\n        </div>\r\n      );\r\n    })}\r\n  </div>\r\n);\r\n\r\nMoviesList.defaultProps = {\r\n  movies: [],\r\n};\r\n\r\nMoviesList.propTypes = {\r\n  movies: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default MoviesList;\r\n","import React, { Component } from \"react\";\r\nimport MoviesList from \"./MoviesList\";\r\n\r\nexport default class MoviesContainer extends Component {\r\n  componentDidMount() {\r\n    this.props.getMovies();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { filters, onChangePage, getMovies, page } = this.props;\r\n    if (filters !== prevProps.filters) {\r\n      onChangePage(1);\r\n      getMovies();\r\n    }\r\n\r\n    if (page !== prevProps.page) {\r\n      getMovies();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      movies,\r\n      session_id,\r\n      favorits,\r\n      watchlist,\r\n      user,\r\n      getFavorits,\r\n      getWatchlist,\r\n      toggleModal,\r\n      isLoading,\r\n    } = this.props;\r\n    return (\r\n      <>\r\n        {isLoading ? (\r\n          \"Loading...\"\r\n        ) : (\r\n          <MoviesList\r\n            movies={movies}\r\n            user={user}\r\n            session_id={session_id}\r\n            favorits={favorits}\r\n            watchlist={watchlist}\r\n            getFavorits={getFavorits}\r\n            getWatchlist={getWatchlist}\r\n            toggleModal={toggleModal}\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { API_URL, API_KEY_3 } from \"../../api/api\";\r\nimport { fetchApi } from \"../../api/api\";\r\nimport classNames from \"classnames\";\r\n\r\nconst tokenApi = `${API_URL}/authentication/token/new?api_key=${API_KEY_3}`;\r\nconst tokenWithLoginApi = `${API_URL}/authentication/token/validate_with_login?api_key=${API_KEY_3}`;\r\nconst sessionIdApi = `https://api.themoviedb.org/3/authentication/session/new?api_key=${API_KEY_3}`;\r\n\r\nexport default class LoginForm extends React.Component {\r\n  state = {\r\n    username: \"\",\r\n    password: \"\",\r\n    repeatPassword: \"\",\r\n    errors: {},\r\n    submitting: false,\r\n  };\r\n\r\n  onChange = (e) => {\r\n    const name = e.target.name;\r\n    const value = e.target.value;\r\n    this.setState((prevState) => ({\r\n      [name]: value,\r\n      errors: {\r\n        ...prevState.errors,\r\n        [name]: null,\r\n        base: null,\r\n      },\r\n    }));\r\n  };\r\n\r\n  handleBlur = (e) => {\r\n    const { name } = e.target;\r\n    const errors = this.validateFields();\r\n    if (Object.keys(errors).length > 0) {\r\n      this.setState((prevState) => ({\r\n        errors: {\r\n          ...prevState.errors,\r\n          [name]: errors[name],\r\n        },\r\n      }));\r\n    }\r\n  };\r\n\r\n  validateFields = () => {\r\n    const errors = {};\r\n\r\n    if (this.state.username === \"\") {\r\n      errors.username = \"Обязательно\";\r\n    }\r\n\r\n    if (this.state.password === \"\") {\r\n      errors.password = \"Обязательно\";\r\n    }\r\n\r\n    if (this.state.repeatPassword !== this.state.password) {\r\n      errors.repeatPassword = \"Должен быть равен паролю\";\r\n    }\r\n\r\n    return errors;\r\n  };\r\n\r\n  onSubmit = () => {\r\n    const { username, password } = this.state;\r\n\r\n    //1\r\n    this.setState({\r\n      submitting: true,\r\n    });\r\n    fetchApi(tokenApi)\r\n      .then(({ request_token }) => {\r\n        //2\r\n        return fetchApi(tokenWithLoginApi, {\r\n          method: \"POST\",\r\n          mode: \"cors\",\r\n          headers: {\r\n            \"Content-type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({\r\n            username,\r\n            password,\r\n            request_token,\r\n          }),\r\n        });\r\n      })\r\n      .then(({ request_token }) => {\r\n        //3\r\n        return fetchApi(sessionIdApi, {\r\n          method: \"POST\",\r\n          mode: \"cors\",\r\n          headers: {\r\n            \"Content-type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({\r\n            request_token,\r\n          }),\r\n        });\r\n      })\r\n      .then(({ session_id }) => {\r\n        this.props.updateSessionId(session_id);\r\n        return fetchApi(\r\n          `${API_URL}/account?api_key=${API_KEY_3}&session_id=${session_id}`\r\n        );\r\n      })\r\n      .then((user) => {\r\n        this.setState(\r\n          {\r\n            submitting: false,\r\n          },\r\n          () => this.props.updateUser(user)\r\n        );\r\n      })\r\n\r\n      .catch((error) =>\r\n        this.setState({\r\n          submitting: false,\r\n          errors: {\r\n            base: error.status_message,\r\n          },\r\n        })\r\n      );\r\n  };\r\n\r\n  onLogin = (e) => {\r\n    e.preventDefault();\r\n    const errors = this.validateFields();\r\n    if (Object.keys(errors).length > 0) {\r\n      this.setState((prevState) => ({\r\n        errors: {\r\n          ...prevState.errors,\r\n          ...errors,\r\n        },\r\n      }));\r\n    } else {\r\n      this.onSubmit();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      username,\r\n      password,\r\n      errors,\r\n      submitting,\r\n      repeatPassword,\r\n    } = this.state;\r\n    return (\r\n      <div className=\"form-login-container\">\r\n        <form className=\"form-login\">\r\n          <h1 className=\"h3 mb-3 font-weight-normal text-center\">\r\n            Авторизация\r\n          </h1>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"username\">Пользователь</label>\r\n            <input\r\n              type=\"text\"\r\n              className={classNames(\"form-control\", {\r\n                \"border-red\": errors.username,\r\n              })}\r\n              id=\"username\"\r\n              placeholder=\"Пользователь\"\r\n              name=\"username\"\r\n              value={username}\r\n              onChange={this.onChange}\r\n              onBlur={this.handleBlur}\r\n            />\r\n            {errors.username && (\r\n              <div className=\"invalid-feedback\">{errors.username}</div>\r\n            )}\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"password\">Пароль</label>\r\n            <input\r\n              type=\"password\"\r\n              className={classNames(\"form-control\", {\r\n                \"border-red\": errors.password,\r\n              })}\r\n              id=\"password\"\r\n              placeholder=\"Пароль\"\r\n              name=\"password\"\r\n              value={password}\r\n              onChange={this.onChange}\r\n              onBlur={this.handleBlur}\r\n            />\r\n            {errors.password && (\r\n              <div className=\"invalid-feedback\">{errors.password}</div>\r\n            )}\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"repeatPassword\">Повторите пароль</label>\r\n            <input\r\n              type=\"password\"\r\n              className={classNames(\"form-control\", {\r\n                \"border-red\": errors.repeatPassword,\r\n              })}\r\n              id=\"repeatPassword\"\r\n              placeholder=\"Повторите пароль\"\r\n              name=\"repeatPassword\"\r\n              value={repeatPassword}\r\n              onChange={this.onChange}\r\n              onBlur={this.handleBlur}\r\n            />\r\n            {errors.repeatPassword && (\r\n              <div className=\"invalid-feedback\">{errors.repeatPassword}</div>\r\n            )}\r\n          </div>\r\n          <button\r\n            type=\"submit\"\r\n            className=\"btn btn-lg btn-primary btn-block\"\r\n            onClick={this.onLogin}\r\n            disabled={submitting}\r\n          >\r\n            Вход\r\n          </button>\r\n          {errors.base && (\r\n            <div className=\"invalid-feedback text-center\">{errors.base}</div>\r\n          )}\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { Modal, ModalBody } from \"reactstrap\";\r\n\r\nimport LoginForm from \"./LoginForm\";\r\n\r\nexport default class Login extends React.Component {\r\n  render() {\r\n    const { updateUser, updateSessionId, showModal, toggleModal } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        <button className=\"btn btn-success\" type=\"button\" onClick={toggleModal}>\r\n          Login\r\n        </button>\r\n        <Modal isOpen={showModal} toggle={toggleModal}>\r\n          <ModalBody>\r\n            <LoginForm\r\n              updateUser={updateUser}\r\n              updateSessionId={updateSessionId}\r\n            />\r\n          </ModalBody>\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport {\r\n  Dropdown,\r\n  DropdownToggle,\r\n  DropdownMenu,\r\n  DropdownItem,\r\n} from \"reactstrap\";\r\nimport { fetchApi, API_URL, API_KEY_3 } from \"../../api/api\";\r\n\r\nclass UserMenu extends Component {\r\n  state = {\r\n    dropdownOpen: false,\r\n  };\r\n\r\n  toggleDropdown = () => {\r\n    this.setState((prevState) => ({\r\n      dropdownOpen: !prevState.dropdownOpen,\r\n    }));\r\n  };\r\n\r\n  handleLogOut = () => {\r\n    fetchApi(`${API_URL}/authentication/session?api_key=${API_KEY_3}`, {\r\n      method: \"DELETE\",\r\n      mode: \"cors\",\r\n      headers: {\r\n        \"Content-type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        session_id: this.props.session_id,\r\n      }),\r\n    }).then(() => {\r\n      this.props.onLogOut();\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { user } = this.props;\r\n    return (\r\n      <Dropdown isOpen={this.state.dropdownOpen} toggle={this.toggleDropdown}>\r\n        <DropdownToggle\r\n          tag=\"div\"\r\n          onClick={this.toggleDropdown}\r\n          data-toggle=\"dropdown\"\r\n          aria-expanded={this.state.dropdownOpen}\r\n        >\r\n          <img\r\n            width=\"40\"\r\n            className=\"rounded-circle\"\r\n            src={`https://secure.gravatar.com/avatar/${user.avatar.gravatar.hash}.jpg?s=64\"`}\r\n            alt=\"\"\r\n            onClick={this.toggleDropdown}\r\n          />\r\n        </DropdownToggle>\r\n        <DropdownMenu right>\r\n          <DropdownItem onClick={this.handleLogOut}>Выйти</DropdownItem>\r\n        </DropdownMenu>\r\n      </Dropdown>\r\n    );\r\n  }\r\n}\r\n\r\nexport default UserMenu;\r\n","import React from \"react\";\r\nimport Login from \"./Login\";\r\nimport UserMenu from \"./UserMenu\";\r\n\r\nclass Header extends React.Component {\r\n  render() {\r\n    const {\r\n      user,\r\n      updateUser,\r\n      updateSessionId,\r\n      onLogOut,\r\n      session_id,\r\n      showModal,\r\n      toggleModal,\r\n    } = this.props;\r\n\r\n    return (\r\n      <nav className=\"navbar navbar-dark bg-primary\">\r\n        <div className=\"container\">\r\n          <ul className=\"navbar-nav\">\r\n            <li className=\"nav-item active\">\r\n              <a className=\"nav-link\" href=\"/\">\r\n                Home\r\n              </a>\r\n            </li>\r\n          </ul>\r\n          {user ? (\r\n            <UserMenu user={user} session_id={session_id} onLogOut={onLogOut} />\r\n          ) : (\r\n            <Login\r\n              updateUser={updateUser}\r\n              updateSessionId={updateSessionId}\r\n              showModal={showModal}\r\n              toggleModal={toggleModal}\r\n            />\r\n          )}\r\n        </div>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\nimport Filters from \"./Filters/Filters\";\r\nimport MoviesContainer from \"./Movies/MoviesContainer\";\r\nimport { API_URL, API_KEY_3, fetchApi } from \"../api/api\";\r\nimport Header from \"./Header/Header\";\r\nimport Cookies from \"universal-cookie\";\r\n\r\nconst cookies = new Cookies();\r\n\r\nexport default class App extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.initialState = {\r\n      user: null,\r\n      session_id: null,\r\n      showModal: false,\r\n      isLoading: false,\r\n      filters: {\r\n        sort_by: \"popularity.desc\",\r\n        primary_release_year: 2020,\r\n        genres: [],\r\n      },\r\n      page: 1,\r\n      movies: [],\r\n      favorits: [],\r\n      watchlist: [],\r\n    };\r\n    this.state = this.initialState;\r\n  }\r\n\r\n  getFavorits = (user) => {\r\n    const { session_id } = this.state;\r\n    fetchApi(\r\n      `${API_URL}/account/${user.id}/favorite/movies?api_key=${API_KEY_3}&session_id=${session_id}&language=ru-RU`\r\n    ).then((data) => this.setState({ favorits: data.results }));\r\n  };\r\n\r\n  getWatchlist = (user) => {\r\n    const { session_id } = this.state;\r\n    fetchApi(\r\n      `${API_URL}/account/${user.id}/watchlist/movies?api_key=${API_KEY_3}&session_id=${session_id}&language=ru-RU`\r\n    ).then((data) => this.setState({ watchlist: data.results }));\r\n  };\r\n\r\n  updateUser = (user) => {\r\n    this.setState({\r\n      user,\r\n    });\r\n  };\r\n\r\n  updateSessionId = (session_id) => {\r\n    cookies.set(\"session_id\", session_id, {\r\n      path: \"/\",\r\n      maxAge: 2592000,\r\n    });\r\n    this.setState({\r\n      session_id,\r\n    });\r\n  };\r\n\r\n  onLogOut = () => {\r\n    cookies.remove(\"session_id\");\r\n    this.setState({\r\n      session_id: null,\r\n      user: null,\r\n      favorits: [],\r\n      watchlist: [],\r\n    });\r\n  };\r\n\r\n  getMovies = () => {\r\n    const {\r\n      filters: { sort_by, primary_release_year, genres },\r\n      page,\r\n    } = this.state;\r\n    const link = `${API_URL}/discover/movie?api_key=${API_KEY_3}&language=ru-RU&sort_by=${sort_by}&page=${page}&primary_release_year=${primary_release_year}&with_genres=${genres.join(\r\n      \",\"\r\n    )}`;\r\n\r\n    this.setState({ isLoading: true });\r\n    fetch(link)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({\r\n          movies: data.results,\r\n          total_pages: data.total_pages,\r\n          isLoading: false,\r\n        });\r\n      });\r\n  };\r\n\r\n  onChangeFilters = (event) => {\r\n    const { value, name } = event.target;\r\n    this.setState((prevState) => ({\r\n      filters: {\r\n        ...prevState.filters,\r\n        [name]: value,\r\n      },\r\n    }));\r\n  };\r\n\r\n  onChangePage = (page) => {\r\n    this.setState({\r\n      page,\r\n    });\r\n  };\r\n\r\n  onChangeGenres = (e) => {\r\n    const { value, checked } = e.target;\r\n    this.setState((state) => {\r\n      const {\r\n        filters: { genres },\r\n      } = state;\r\n      return {\r\n        filters: {\r\n          ...state.filters,\r\n          genres: checked\r\n            ? [...genres, value]\r\n            : genres.filter((el) => el !== value),\r\n        },\r\n      };\r\n    });\r\n  };\r\n\r\n  onReset = (event) => {\r\n    event.preventDefault();\r\n    this.setState({ filters: this.initialState.filters });\r\n  };\r\n\r\n  toggleModal = () => {\r\n    this.setState((state) => {\r\n      return { showModal: !state.showModal };\r\n    });\r\n  };\r\n\r\n  componentDidMount() {\r\n    const session_id = cookies.get(\"session_id\");\r\n    if (session_id) {\r\n      fetchApi(\r\n        `${API_URL}/account?api_key=${API_KEY_3}&session_id=${session_id}`\r\n      ).then((user) => {\r\n        this.updateUser(user);\r\n        this.updateSessionId(session_id);\r\n        this.getFavorits(user);\r\n        this.getWatchlist(user);\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.session_id) {\r\n      if (this.state.user !== prevState.user) {\r\n        this.getFavorits(this.state.user);\r\n        this.getWatchlist(this.state.user);\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      filters,\r\n      page,\r\n      movies,\r\n      total_pages,\r\n      user,\r\n      session_id,\r\n      favorits,\r\n      watchlist,\r\n      showModal,\r\n      isLoading,\r\n    } = this.state;\r\n    return (\r\n      <>\r\n        <Header\r\n          user={user}\r\n          session_id={session_id}\r\n          showModal={showModal}\r\n          onLogOut={this.onLogOut}\r\n          updateUser={this.updateUser}\r\n          updateSessionId={this.updateSessionId}\r\n          toggleModal={this.toggleModal}\r\n        />\r\n        <div className=\"container\">\r\n          <div className=\"row mt-4\">\r\n            <div className=\"col-4\">\r\n              <div className=\"card\">\r\n                <div className=\"card-body\">\r\n                  <h3>Фильтры:</h3>\r\n                  <Filters\r\n                    page={page}\r\n                    filters={filters}\r\n                    total_pages={total_pages}\r\n                    onChangeFilters={this.onChangeFilters}\r\n                    onChangePage={this.onChangePage}\r\n                    onReset={this.onReset}\r\n                    onChangeGenres={this.onChangeGenres}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-8\">\r\n              <MoviesContainer\r\n                user={user}\r\n                page={page}\r\n                favorits={favorits}\r\n                watchlist={watchlist}\r\n                filters={filters}\r\n                movies={movies}\r\n                session_id={session_id}\r\n                isLoading={isLoading}\r\n                onChangePage={this.onChangePage}\r\n                getMovies={this.getMovies}\r\n                getFavorits={this.getFavorits}\r\n                getWatchlist={this.getWatchlist}\r\n                toggleModal={this.toggleModal}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./components/App\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./stylesheets/index.css\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}